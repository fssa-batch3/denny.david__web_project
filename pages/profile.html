<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- For demo purpose -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/profile.css">
    <title>Document</title>
</head>

<body id="hidebtn">
    <!-- Profile form -->
    <!-- <div id="back-image"></div>
    <div id="back-image2"></div> -->

    <form id="form">

        

           
                <!-- <div class="grey-img"></div> -->
                <!-- <div class="inside-img"></div> -->
                <!-- <div class="inside1-img"></div> -->
                <fieldset>
                    <div class="profile1">
                    <h1 style="margin-left:125px;">My Profile</h1>
                    <img  style="width:140px; height:140px; margin-left:125px;" src="../assets/image/profile.icon">
                   
                <div class="firstname">    <h4>First Name:</h4>
                    <input type="text" id="fname" placeholder="First Name" disabled>
                </div>
<br>
                <div class="secondname">  
                    <h4>Last Name:</h4>
                    <input type="text" id="lname" placeholder="Last Name" disabled>
                    </div>
<br>
                <div class="phoneno">                    <h4>Phone no:</h4>
                    <input type="tel" id="telephone" placeholder="Phone no" disabled>
                </div>
<br>
<div class="emailid">                    
<h4>emailid:</h4>
<input style="margin-left:92px;" id="email" type="email" id="email" placeholder="email" disabled>
<br>                 
<br></div> 
<br><button style="margin-left:100px;" id="edit_btn">Edit</button>

<button id="save-btn"> Save</button>
 <button id="erase">LOG OUT</button>

</div>
                </fieldset>
                <!-- <input type="button" name="previous" class="previous action-button" value="Previous" /> -->
                <!-- <button onclick="process()" class="submit action-button" target="_top">Submit</button> -->
                <!-- <button id="erase">LOG OUT</button> -->
                <!-- <div class="grey1-img"></div> -->
                
            </div>
            </div>
        </form>
        <div  id="progress"> 
        <h2 class="h2">Progress</h2>     
  <div class ="eartraining_progress">
    <h3>Ear training exercise</h3>
    <p id="score">Your Score <span id="ear_training_result">0/100</span> <button id="ear_training_redo">Take challenge</button></p>
  </div></div>
  <div class ="findingchords_progress">
    <h3>Finding chords exercise</h3>
    <p id="score">Your score<span id="finding_result">0/100</span> <button id="finding_redo">Take challenge</button></p>
  </div>
  
  <div class ="seventh_progress">
    <h3>Seventh chords exercise</h3>
    <p id="score">Your score<span id="seventh_result">0/100</span> <button id="seventh_redo">Take challenge</button></p>
  </div>
  <div class ="diminished_progress">
    <h3>Seventh chords exercise</h3>
    <p id="score">Your score<span id="dim_result">0/100</span> <button id="dim_redo">Take challenge</button></p>
  </div>
  <!-- <div class ="seventh_progress">
    <h3>Seventh chords exercise</h3>
    <p id="score">You got <button id="redo">Redo</button></p>
  </div> -->
    <div class = "inversions_progress">
        <h3>Inversion exercise</h3>
        <p id="score">You got <button id="inversion_redo">Take challenge</button></p>  
    </div>       

       
             

   `
</body>
<script>    // Storing the data from the signup page 
    const users = JSON.parse(localStorage.getItem('store_data'));
    const data = JSON.parse(localStorage.getItem('profile_details'));
    const fname = document.getElementById("fname");
    const lname = document.getElementById("lname");
    const phone = document.getElementById("telephone");
    const email=document.getElementById("email")
    const fname1 = document.getElementById("fname1");
    const lname1 = document.getElementById("lname1");
    const phone1 = document.getElementById("telephone1");
    const submit_btn = document.getElementById("save-btn");
  
    // let edit=document.getElementById("getDetails");
    let result;

    // for (let i = 0; i < users.length; i++) {
    //     document.getElementById("fname").value = users[i]["user_name"]; //users[1][name]
    //     document.getElementById("lname").value = users[i]["last_name"];
    //     document.getElementById("telephone").value = users[i]["phone_no"];
    // }

    // let users1 = JSON.parse(localStorage.getItem('store_data'));
    // for (let i = 0; i < users1.length; i++) {
    //     document.getElementById("fname1").value = users[i]["user_name"]; //users[1][name]
    //     document.getElementById("lname1").value = users[i]["last_name"];
    //     document.getElementById("telephone1").value = users[i]["phone_no"];
    // }

    // let firstName = document.getElementById("fname");
    // document.getElementById("save-btn").addEventListener('click', e => {
    //     // document.getElementById("fname1").value  =firstName.value;

    //    firstName.find(JSON.parse(localStorage.getItem('store_data')))=users[i]["user_name"]
    //    console.log("firstName");
    // })

    users.find(e => {
        if (e.mail_id == data.username) {
            return result = e;
           
        }   
    })       
    
    fname.value  = result.user_name   
    lname.value  = result.last_name   
    phone.value  = result.phone_no  
    email.value=result.mail_id
    submit_btn.addEventListener("click", e => {
        // e.preventDefault();
        result.user_name = fname.value
        result.last_name = lname.value
        result.phone_no = phone.value
        localStorage.setItem('store_data', JSON.stringify(users))
    
    })


    // This code is for popup 
    const edit = document.getElementById("edit_btn");
    edit.addEventListener("click", e => {
        e.preventDefault()
       fname.removeAttribute("disabled")
       lname.removeAttribute("disabled")
       phone.removeAttribute("disabled")
       email.removeAttribute("disabled")
    })
        
    
    let results = localStorage.getItem("correct")
        
        let save=document.getElementById("save-btn")

        save.addEventListener("click",e=>{
            // save.preventDefault();
     let reusult2= JSON.parse(localStorage.getItem("store_data"))
     reusult2.find(e=>{
        if(email.value===e.mail_id){
            e.user_name  =    fname.value
            e.last_name  =   lname.value
            e.phone_no   =phone.value
            e.email   =  email.value

            localStorage.setItem("store_data",JSON.stringify(users))
         fname.setAttribute("disabled","")
         lname.setAttribute("disabled","")
         phone.setAttribute("disabled","")
         email.setAttribute("disabled","")
        //  window.location.href="./index.html"
        }
     })
    })
   
     
     let ear_redo = document.getElementById("ear_training_redo")
     ear_redo.addEventListener("click",e=>{
        let store_data = JSON.parse(localStorage.getItem("store_data"))
            let logged = localStorage.getItem("logged_in")
            let user_data;
            store_data.forEach(e => {
                if (e.mail_id == logged) {
                   
                    e["ear_training"] = 0
                }
            })
            localStorage.setItem("store_data", JSON.stringify(store_data)
           )
           window.location.href="exercise.html?data_id=1"
        }
    )
    let seventh_redo = document.getElementById("seventh_redo")
    seventh_redo.addEventListener("click",e=>{
        let store_data = JSON.parse(localStorage.getItem("store_data"))
            let logged = localStorage.getItem("logged_in")
            let user_data;
            store_data.forEach(e => {
                if (e.mail_id == logged) {
                   
                    e["seventh_chords"] = 0
                }
            })
            localStorage.setItem("store_data", JSON.stringify(store_data)
           )
           window.location.href="exercise3.html?data_id=1"
        }
    )
    let dim_redo = document.getElementById("dim_redo")
     dim_redo.addEventListener("click",e=>{
        let store_data = JSON.parse(localStorage.getItem("store_data"))
            let logged = localStorage.getItem("logged_in")
            let user_data;
            store_data.forEach(e => {
                if (e.mail_id == logged) {
                   
                    e["diminished_chords"] = 0
                }
            })
            localStorage.setItem("store_data", JSON.stringify(store_data)
           )
           window.location.href="exercise4.html?data_id=1"
        }
    )

    let inversion_redo = document.getElementById("inversion_redo")
     inversion_redo.addEventListener("click",e=>{
        let store_data = JSON.parse(localStorage.getItem("store_data"))
            let logged = localStorage.getItem("logged_in")
            let user_data;
            store_data.forEach(e => {
                if (e.mail_id == logged) {
                   
                    e["inversions_practice"] = 0
                }
            })
            localStorage.setItem("store_data", JSON.stringify(store_data)
           )
           window.location.href="exercise6.html?data_id=1"
        }
    )

    let find_redo = document.getElementById("finding_redo")
     find_redo.addEventListener("click",e=>{
        let store_data = JSON.parse(localStorage.getItem("store_data"))
            let logged = localStorage.getItem("logged_in")
            let user_data;
            store_data.forEach(e => {
                if (e.mail_id == logged) {
                   
                    e["finding_chords"] = 0
                }
            })
            localStorage.setItem("store_data", JSON.stringify(store_data)
           )
           window.location.href="exercise2.html?data_id=1"
        }
    )

    let ear_training_score;
    let finding_chords_score;
    let _sore;
    let __score;
    let score;


    let store_data = JSON.parse(localStorage.getItem("store_data"))
            let logged = localStorage.getItem("logged_in")
            let user_data;
            store_data.forEach(e => {
                if (e.mail_id == logged) {
                    ear_training_score=e["ear_training"]
                    finding_chords_score =e["finding_chords"]
                }
            })
    let ear_training_result= document.getElementById("ear_training_result")
    console.log(ear_training_score,ear_training_result);
    ear_training_result.innerHTML= `${ear_training_score}/100`
   
    

</script>
</html>